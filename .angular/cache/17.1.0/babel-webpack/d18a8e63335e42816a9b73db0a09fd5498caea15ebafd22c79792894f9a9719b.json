{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../core/services/crop.service\";\nimport * as i3 from \"../../core/services/ai.service\";\nfunction CropRoadmapComponent_section_6_option_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const crop_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", crop_r7.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(crop_r7.name);\n  }\n}\nfunction CropRoadmapComponent_section_6_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \" Please select a crop type \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CropRoadmapComponent_section_6_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \" Please select a valid planting date \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CropRoadmapComponent_section_6_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \" Please enter a valid duration (1-52 weeks) \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CropRoadmapComponent_section_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"section\", 6)(1, \"div\", 7)(2, \"h2\");\n    i0.ɵɵtext(3, \"Start a New Crop Cycle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"form\", 8);\n    i0.ɵɵlistener(\"ngSubmit\", function CropRoadmapComponent_section_6_Template_form_ngSubmit_4_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.onSubmit());\n    });\n    i0.ɵɵelementStart(5, \"div\", 9)(6, \"label\", 10);\n    i0.ɵɵtext(7, \"Crop Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"select\", 11)(9, \"option\", 12);\n    i0.ɵɵtext(10, \"Select a crop type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, CropRoadmapComponent_section_6_option_11_Template, 2, 2, \"option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, CropRoadmapComponent_section_6_div_12_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 9)(14, \"label\", 15);\n    i0.ɵɵtext(15, \"Planting Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"input\", 16);\n    i0.ɵɵtemplate(17, CropRoadmapComponent_section_6_div_17_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 9)(19, \"label\", 17);\n    i0.ɵɵtext(20, \"Cycle Duration (weeks)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(21, \"input\", 18);\n    i0.ɵɵtemplate(22, CropRoadmapComponent_section_6_div_22_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 19);\n    i0.ɵɵtext(24, \"Start Tracking\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_2_0;\n    let tmp_3_0;\n    let tmp_4_0;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.cropForm);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.cropTypes);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx_r0.cropForm.get(\"cropType\")) == null ? null : tmp_2_0.invalid) && ((tmp_2_0 = ctx_r0.cropForm.get(\"cropType\")) == null ? null : tmp_2_0.touched));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx_r0.cropForm.get(\"plantDate\")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx_r0.cropForm.get(\"plantDate\")) == null ? null : tmp_3_0.touched));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx_r0.cropForm.get(\"cycleDuration\")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx_r0.cropForm.get(\"cycleDuration\")) == null ? null : tmp_4_0.touched));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r0.cropForm.invalid);\n  }\n}\nfunction CropRoadmapComponent_section_7_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"AI Insight\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CropRoadmapComponent_section_7_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CropRoadmapComponent_section_7_div_21_li_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const task_r17 = ctx.$implicit;\n    i0.ɵɵclassProp(\"completed\", task_r17.completed);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", task_r17.description, \" \");\n  }\n}\nfunction CropRoadmapComponent_section_7_div_21_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 45)(1, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function CropRoadmapComponent_section_7_div_21_div_16_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const i_r14 = i0.ɵɵnextContext().index;\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.markStageComplete(i_r14));\n    });\n    i0.ɵɵtext(2, \"Mark Complete\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CropRoadmapComponent_section_7_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 36)(1, \"div\", 37)(2, \"div\", 38);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 39)(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 40);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 41);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 42)(12, \"h4\");\n    i0.ɵɵtext(13, \"Tasks:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"ul\");\n    i0.ɵɵtemplate(15, CropRoadmapComponent_section_7_div_21_li_15_Template, 2, 3, \"li\", 43);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(16, CropRoadmapComponent_section_7_div_21_div_16_Template, 3, 0, \"div\", 44);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const stage_r13 = ctx.$implicit;\n    const i_r14 = ctx.index;\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"completed\", stage_r13.completed);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"active\", ctx_r12.getCurrentWeek() >= stage_r13.startWeek && ctx_r12.getCurrentWeek() <= stage_r13.endWeek);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r14 + 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(stage_r13.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"Week \", stage_r13.startWeek, \" - \", stage_r13.endWeek, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(stage_r13.description);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", stage_r13.tasks);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !stage_r13.completed && ctx_r12.getCurrentWeek() >= stage_r13.startWeek);\n  }\n}\nfunction CropRoadmapComponent_section_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"section\", 22)(1, \"div\", 7)(2, \"div\", 23)(3, \"div\")(4, \"h2\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 24);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 25)(10, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function CropRoadmapComponent_section_7_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.getAIInsight());\n    });\n    i0.ɵɵtemplate(11, CropRoadmapComponent_section_7_span_11_Template, 2, 0, \"span\", 27)(12, CropRoadmapComponent_section_7_span_12_Template, 2, 0, \"span\", 27);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"div\", 28)(14, \"div\", 29);\n    i0.ɵɵelement(15, \"div\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 31);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 32)(19, \"div\", 33);\n    i0.ɵɵelement(20, \"div\", 34);\n    i0.ɵɵtemplate(21, CropRoadmapComponent_section_7_div_21_Template, 17, 11, \"div\", 35);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.currentCropCycle.cropName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" Planted on \", i0.ɵɵpipeBind2(8, 11, ctx_r1.currentCropCycle.plantDate, \"MMM d, y\"), \" \\u2022 Week \", ctx_r1.getCurrentWeek(), \" of \", ctx_r1.currentCropCycle.durationWeeks, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.loadingInsight);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loadingInsight);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loadingInsight);\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"width\", ctx_r1.calculateProgress(), \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.calculateProgress(), \"% complete\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.currentCropCycle.stages);\n  }\n}\nfunction CropRoadmapComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 47)(1, \"div\", 48)(2, \"div\", 49)(3, \"h2\");\n    i0.ɵɵtext(4, \"AI Growth Insight\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function CropRoadmapComponent_div_8_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.closeAIInsight());\n    });\n    i0.ɵɵtext(6, \"\\u00D7\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 51)(8, \"div\", 52)(9, \"div\", 53);\n    i0.ɵɵtext(10, \"\\uD83E\\uDD16\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 54);\n    i0.ɵɵelement(12, \"p\", 55);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"div\", 56)(14, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function CropRoadmapComponent_div_8_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.closeAIInsight());\n    });\n    i0.ɵɵtext(15, \"Close\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r2.aiInsight, i0.ɵɵsanitizeHtml);\n  }\n}\nexport class CropRoadmapComponent {\n  constructor(fb, cropService, aiService) {\n    this.fb = fb;\n    this.cropService = cropService;\n    this.aiService = aiService;\n    this.cropTypes = [];\n    this.currentCropCycle = null;\n    this.aiInsight = '';\n    this.showAiInsight = false;\n    this.loadingInsight = false;\n    this.cropForm = this.fb.group({\n      cropType: ['', Validators.required],\n      plantDate: ['', Validators.required],\n      cycleDuration: ['12', [Validators.required, Validators.min(1), Validators.max(52)]]\n    });\n  }\n  ngOnInit() {\n    this.loadCropTypes();\n    this.loadCurrentCropCycle();\n  }\n  loadCropTypes() {\n    this.cropService.getCropTypes().subscribe({\n      next: types => {\n        this.cropTypes = types;\n      },\n      error: error => {\n        console.error('Error loading crop types:', error);\n      }\n    });\n  }\n  loadCurrentCropCycle() {\n    this.cropService.getCurrentCropCycle().subscribe({\n      next: cycle => {\n        this.currentCropCycle = cycle;\n        if (cycle) {\n          // Populate form with current cycle data\n          this.cropForm.patchValue({\n            cropType: cycle.cropTypeId,\n            plantDate: cycle.plantDate,\n            cycleDuration: cycle.durationWeeks\n          });\n        }\n      },\n      error: error => {\n        console.error('Error loading current crop cycle:', error);\n      }\n    });\n  }\n  calculateProgress() {\n    if (!this.currentCropCycle) return 0;\n    const startDate = new Date(this.currentCropCycle.plantDate);\n    const today = new Date();\n    const totalDays = this.currentCropCycle.durationWeeks * 7;\n    const daysPassed = Math.floor((today.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\n    return Math.min(Math.round(daysPassed / totalDays * 100), 100);\n  }\n  getCurrentWeek() {\n    if (!this.currentCropCycle) return 0;\n    const startDate = new Date(this.currentCropCycle.plantDate);\n    const today = new Date();\n    const daysPassed = Math.floor((today.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\n    return Math.min(Math.ceil(daysPassed / 7), this.currentCropCycle.durationWeeks);\n  }\n  onSubmit() {\n    if (this.cropForm.invalid) return;\n    const formData = this.cropForm.value;\n    const selectedCropType = this.cropTypes.find(ct => ct.id === formData.cropType);\n    const cropCycle = {\n      id: Date.now().toString(),\n      cropTypeId: formData.cropType,\n      cropName: selectedCropType?.name || '',\n      startDate: new Date(),\n      plantDate: formData.plantDate,\n      currentStage: 0,\n      status: 'active',\n      completedStages: [],\n      durationWeeks: formData.cycleDuration,\n      stages: selectedCropType?.stages.map(s => ({\n        name: s.name,\n        startWeek: s.duration,\n        endWeek: s.duration,\n        description: s.description,\n        tasks: s.tasks.map(t => ({\n          description: t,\n          completed: false\n        })),\n        completed: false\n      })) || []\n    };\n    this.cropService.createCropCycle(cropCycle).subscribe({\n      next: cycle => {\n        this.currentCropCycle = cycle;\n      },\n      error: error => {\n        console.error('Error creating crop cycle:', error);\n      }\n    });\n  }\n  markStageComplete(stageIndex) {\n    if (!this.currentCropCycle) return;\n    this.cropService.completeStage(this.currentCropCycle.id, stageIndex).subscribe({\n      next: success => {\n        if (success && this.currentCropCycle) {\n          // Update the local state if the operation was successful\n          const updatedStages = [...this.currentCropCycle.stages];\n          updatedStages[stageIndex].completed = true;\n          this.currentCropCycle = {\n            ...this.currentCropCycle,\n            stages: updatedStages,\n            completedStages: [...this.currentCropCycle.completedStages, stageIndex]\n          };\n        }\n      },\n      error: error => {\n        console.error('Error completing stage:', error);\n      }\n    });\n  }\n  getAIInsight() {\n    if (!this.currentCropCycle) return;\n    this.loadingInsight = true;\n    this.aiService.getCropGrowthInsight(this.currentCropCycle.id).subscribe({\n      next: insight => {\n        this.aiInsight = insight;\n        this.showAiInsight = true;\n        this.loadingInsight = false;\n      },\n      error: error => {\n        console.error('Error getting AI insight:', error);\n        this.loadingInsight = false;\n      }\n    });\n  }\n  closeAIInsight() {\n    this.showAiInsight = false;\n  }\n  static {\n    this.ɵfac = function CropRoadmapComponent_Factory(t) {\n      return new (t || CropRoadmapComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.CropService), i0.ɵɵdirectiveInject(i3.AiService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CropRoadmapComponent,\n      selectors: [[\"app-crop-roadmap\"]],\n      decls: 9,\n      vars: 3,\n      consts: [[1, \"crop-roadmap-container\"], [1, \"section-header\"], [1, \"section-description\"], [\"class\", \"crop-setup\", 4, \"ngIf\"], [\"class\", \"active-crop-cycle\", 4, \"ngIf\"], [\"class\", \"modal\", 4, \"ngIf\"], [1, \"crop-setup\"], [1, \"card\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"cropType\"], [\"id\", \"cropType\", \"formControlName\", \"cropType\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"for\", \"plantDate\"], [\"type\", \"date\", \"id\", \"plantDate\", \"formControlName\", \"plantDate\"], [\"for\", \"cycleDuration\"], [\"type\", \"number\", \"id\", \"cycleDuration\", \"formControlName\", \"cycleDuration\", \"min\", \"1\", \"max\", \"52\"], [\"type\", \"submit\", 1, \"btn-primary\", 3, \"disabled\"], [3, \"value\"], [1, \"error-message\"], [1, \"active-crop-cycle\"], [1, \"cycle-header\"], [1, \"cycle-meta\"], [1, \"cycle-actions\"], [1, \"btn-secondary\", 3, \"disabled\", \"click\"], [4, \"ngIf\"], [1, \"progress-container\"], [1, \"progress-bar\"], [1, \"progress-fill\"], [1, \"progress-text\"], [1, \"stages-timeline\"], [1, \"timeline-container\"], [1, \"timeline-track\"], [\"class\", \"timeline-stage\", 3, \"completed\", 4, \"ngFor\", \"ngForOf\"], [1, \"timeline-stage\"], [1, \"stage-marker\"], [1, \"marker-icon\"], [1, \"stage-content\"], [1, \"stage-duration\"], [1, \"stage-description\"], [1, \"stage-tasks\"], [3, \"completed\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"stage-actions\", 4, \"ngIf\"], [1, \"stage-actions\"], [1, \"btn-secondary\", 3, \"click\"], [1, \"modal\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"close-button\", 3, \"click\"], [1, \"modal-body\"], [1, \"ai-message\"], [1, \"ai-icon\"], [1, \"ai-content\"], [3, \"innerHTML\"], [1, \"modal-footer\"]],\n      template: function CropRoadmapComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"section\", 1)(2, \"h1\");\n          i0.ɵɵtext(3, \"Crop Cycle Roadmap\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"p\", 2);\n          i0.ɵɵtext(5, \"Track your crop's growth stages and receive AI-powered insights.\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(6, CropRoadmapComponent_section_6_Template, 25, 6, \"section\", 3)(7, CropRoadmapComponent_section_7_Template, 22, 14, \"section\", 4)(8, CropRoadmapComponent_div_8_Template, 16, 1, \"div\", 5);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", !ctx.currentCropCycle);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.currentCropCycle);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showAiInsight);\n        }\n      },\n      styles: [\"\\n\\n.crop-roadmap-container[_ngcontent-%COMP%] {\\n    padding: 20px;\\n    max-width: 1200px;\\n    margin: 0 auto;\\n  }\\n  \\n  .section-header[_ngcontent-%COMP%] {\\n    margin-bottom: 30px;\\n  }\\n  \\n  .section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n    color: #006d5b;\\n    font-size: 32px;\\n    margin-bottom: 8px;\\n  }\\n  \\n  .section-description[_ngcontent-%COMP%] {\\n    color: #4a4a4a;\\n    font-size: 16px;\\n  }\\n  \\n  .card[_ngcontent-%COMP%] {\\n    background-color: #ffffff;\\n    border-radius: 10px;\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\\n    padding: 24px;\\n    margin-bottom: 30px;\\n  }\\n  \\n  .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n    color: #006d5b;\\n    font-size: 22px;\\n    margin-top: 0;\\n    margin-bottom: 20px;\\n  }\\n  \\n  \\n\\n  .form-group[_ngcontent-%COMP%] {\\n    margin-bottom: 20px;\\n  }\\n  \\n  label[_ngcontent-%COMP%] {\\n    display: block;\\n    margin-bottom: 8px;\\n    font-weight: 500;\\n    color: #444;\\n  }\\n  \\n  input[_ngcontent-%COMP%], select[_ngcontent-%COMP%] {\\n    width: 100%;\\n    padding: 12px;\\n    border: 1px solid #ddd;\\n    border-radius: 6px;\\n    font-size: 16px;\\n  }\\n  \\n  input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus {\\n    outline: none;\\n    border-color: #008e73;\\n    box-shadow: 0 0 0 2px rgba(0, 142, 115, 0.2);\\n  }\\n  \\n  .error-message[_ngcontent-%COMP%] {\\n    color: #d32f2f;\\n    font-size: 14px;\\n    margin-top: 4px;\\n  }\\n  \\n  .btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%] {\\n    border: none;\\n    padding: 12px 24px;\\n    border-radius: 6px;\\n    font-weight: 500;\\n    cursor: pointer;\\n    transition: background-color 0.2s;\\n    font-size: 16px;\\n  }\\n  \\n  .btn-primary[_ngcontent-%COMP%] {\\n    background-color: #008e73;\\n    color: white;\\n  }\\n  \\n  .btn-primary[_ngcontent-%COMP%]:hover {\\n    background-color: #00594d;\\n  }\\n  \\n  .btn-primary[_ngcontent-%COMP%]:disabled {\\n    background-color: #cccccc;\\n    cursor: not-allowed;\\n  }\\n  \\n  .btn-secondary[_ngcontent-%COMP%] {\\n    background-color: #f0ede6;\\n    color: #006d5b;\\n  }\\n  \\n  .btn-secondary[_ngcontent-%COMP%]:hover {\\n    background-color: #e0dcd2;\\n  }\\n  \\n  .btn-secondary[_ngcontent-%COMP%]:disabled {\\n    opacity: 0.6;\\n    cursor: not-allowed;\\n  }\\n  \\n  \\n\\n  .cycle-header[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: flex-start;\\n    margin-bottom: 20px;\\n  }\\n  \\n  .cycle-meta[_ngcontent-%COMP%] {\\n    color: #666;\\n    margin-top: 4px;\\n  }\\n  \\n  .progress-container[_ngcontent-%COMP%] {\\n    margin-bottom: 30px;\\n  }\\n  \\n  .progress-bar[_ngcontent-%COMP%] {\\n    height: 12px;\\n    background-color: #e0f2f1;\\n    border-radius: 6px;\\n    overflow: hidden;\\n    margin-bottom: 8px;\\n  }\\n  \\n  .progress-fill[_ngcontent-%COMP%] {\\n    height: 100%;\\n    background-color: #006d5b;\\n    transition: width 0.3s ease;\\n  }\\n  \\n  .progress-text[_ngcontent-%COMP%] {\\n    text-align: right;\\n    font-size: 14px;\\n    color: #666;\\n  }\\n  \\n  \\n\\n  .stages-timeline[_ngcontent-%COMP%] {\\n    margin-top: 40px;\\n  }\\n  \\n  .timeline-container[_ngcontent-%COMP%] {\\n    position: relative;\\n    padding-left: 40px;\\n  }\\n  \\n  .timeline-track[_ngcontent-%COMP%] {\\n    position: absolute;\\n    left: 20px;\\n    top: 0;\\n    bottom: 0;\\n    width: 2px;\\n    background-color: #e0e0e0;\\n    transform: translateX(-50%);\\n  }\\n  \\n  .timeline-stage[_ngcontent-%COMP%] {\\n    position: relative;\\n    margin-bottom: 40px;\\n  }\\n  \\n  .stage-marker[_ngcontent-%COMP%] {\\n    position: absolute;\\n    left: -40px;\\n    top: 0;\\n    width: 40px;\\n    height: 40px;\\n    background-color: #f0ede6;\\n    border-radius: 50%;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    z-index: 2;\\n  }\\n  \\n  .stage-marker.active[_ngcontent-%COMP%] {\\n    background-color: #006d5b;\\n  }\\n  \\n  .marker-icon[_ngcontent-%COMP%] {\\n    font-weight: bold;\\n    color: #006d5b;\\n  }\\n  \\n  .stage-marker.active[_ngcontent-%COMP%]   .marker-icon[_ngcontent-%COMP%] {\\n    color: white;\\n  }\\n  \\n  .timeline-stage.completed[_ngcontent-%COMP%]   .stage-marker[_ngcontent-%COMP%] {\\n    background-color: #8d90bb;\\n  }\\n  \\n  .timeline-stage.completed[_ngcontent-%COMP%]   .marker-icon[_ngcontent-%COMP%] {\\n    color: white;\\n  }\\n  \\n  \\n\\n.stage-content[_ngcontent-%COMP%] {\\n    background-color: #f9f9f9;\\n    border-radius: 8px;\\n    padding: 20px;\\n    border-left: 3px solid #f0ede6;\\n  }\\n  \\n  .timeline-stage.completed[_ngcontent-%COMP%]   .stage-content[_ngcontent-%COMP%] {\\n    border-left-color: #8d90bb;\\n  }\\n  \\n  .stage-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n    color: #006d5b;\\n    margin-top: 0;\\n    margin-bottom: 8px;\\n    font-size: 18px;\\n  }\\n  \\n  .stage-duration[_ngcontent-%COMP%] {\\n    color: #666;\\n    font-size: 14px;\\n    margin-bottom: 12px;\\n  }\\n  \\n  .stage-description[_ngcontent-%COMP%] {\\n    margin-bottom: 16px;\\n    color: #444;\\n  }\\n  \\n  .stage-tasks[_ngcontent-%COMP%] {\\n    margin-top: 16px;\\n  }\\n  \\n  .stage-tasks[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\\n    margin-top: 0;\\n    margin-bottom: 10px;\\n    font-size: 16px;\\n    color: #333;\\n  }\\n  \\n  .stage-tasks[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n    padding-left: 20px;\\n    margin: 0;\\n  }\\n  \\n  .stage-tasks[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n    margin-bottom: 6px;\\n    color: #444;\\n  }\\n  \\n  .stage-tasks[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%] {\\n    text-decoration: line-through;\\n    color: #888;\\n  }\\n  \\n  .stage-actions[_ngcontent-%COMP%] {\\n    margin-top: 16px;\\n  }\\n  \\n  \\n\\n  .modal[_ngcontent-%COMP%] {\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background-color: rgba(0, 0, 0, 0.5);\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    z-index: 1000;\\n  }\\n  \\n  .modal-content[_ngcontent-%COMP%] {\\n    background-color: white;\\n    border-radius: 10px;\\n    width: 90%;\\n    max-width: 600px;\\n    max-height: 90vh;\\n    overflow-y: auto;\\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\\n  }\\n  \\n  .modal-header[_ngcontent-%COMP%] {\\n    padding: 16px 24px;\\n    border-bottom: 1px solid #eee;\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n  }\\n  \\n  .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n    margin: 0;\\n    color: #006d5b;\\n    font-size: 20px;\\n  }\\n  \\n  .close-button[_ngcontent-%COMP%] {\\n    background: none;\\n    border: none;\\n    font-size: 24px;\\n    cursor: pointer;\\n    color: #666;\\n  }\\n  \\n  .close-button[_ngcontent-%COMP%]:hover {\\n    color: #333;\\n  }\\n  \\n  .modal-body[_ngcontent-%COMP%] {\\n    padding: 24px;\\n  }\\n  \\n  .modal-footer[_ngcontent-%COMP%] {\\n    padding: 16px 24px;\\n    border-top: 1px solid #eee;\\n    display: flex;\\n    justify-content: flex-end;\\n  }\\n  \\n  .ai-message[_ngcontent-%COMP%] {\\n    display: flex;\\n    gap: 16px;\\n  }\\n  \\n  .ai-icon[_ngcontent-%COMP%] {\\n    font-size: 24px;\\n  }\\n  \\n  .ai-content[_ngcontent-%COMP%] {\\n    flex: 1;\\n    background-color: #f0f9f7;\\n    padding: 16px;\\n    border-radius: 8px;\\n    color: #333;\\n  }\\n  \\n  @media (max-width: 768px) {\\n    .cycle-header[_ngcontent-%COMP%] {\\n      flex-direction: column;\\n      gap: 16px;\\n    }\\n    \\n    .cycle-actions[_ngcontent-%COMP%] {\\n      width: 100%;\\n    }\\n    \\n    .cycle-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n      width: 100%;\\n    }\\n    \\n    .timeline-container[_ngcontent-%COMP%] {\\n      padding-left: 30px;\\n    }\\n    \\n    .stage-marker[_ngcontent-%COMP%] {\\n      left: -30px;\\n      width: 30px;\\n      height: 30px;\\n    }\\n    \\n    .stage-content[_ngcontent-%COMP%] {\\n      padding: 16px;\\n    }\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvY3JvcC1yb2FkbWFwL2Nyb3Atcm9hZG1hcC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZEQUE2RDtBQUM3RDtJQUNJLGFBQWE7SUFDYixpQkFBaUI7SUFDakIsY0FBYztFQUNoQjs7RUFFQTtJQUNFLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLGNBQWM7SUFDZCxlQUFlO0lBQ2Ysa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsY0FBYztJQUNkLGVBQWU7RUFDakI7O0VBRUE7SUFDRSx5QkFBeUI7SUFDekIsbUJBQW1CO0lBQ25CLDBDQUEwQztJQUMxQyxhQUFhO0lBQ2IsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsY0FBYztJQUNkLGVBQWU7SUFDZixhQUFhO0lBQ2IsbUJBQW1CO0VBQ3JCOztFQUVBLGlCQUFpQjtFQUNqQjtJQUNFLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLGNBQWM7SUFDZCxrQkFBa0I7SUFDbEIsZ0JBQWdCO0lBQ2hCLFdBQVc7RUFDYjs7RUFFQTtJQUNFLFdBQVc7SUFDWCxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixlQUFlO0VBQ2pCOztFQUVBO0lBQ0UsYUFBYTtJQUNiLHFCQUFxQjtJQUNyQiw0Q0FBNEM7RUFDOUM7O0VBRUE7SUFDRSxjQUFjO0lBQ2QsZUFBZTtJQUNmLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLGtCQUFrQjtJQUNsQixnQkFBZ0I7SUFDaEIsZUFBZTtJQUNmLGlDQUFpQztJQUNqQyxlQUFlO0VBQ2pCOztFQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLFlBQVk7RUFDZDs7RUFFQTtJQUNFLHlCQUF5QjtFQUMzQjs7RUFFQTtJQUNFLHlCQUF5QjtJQUN6QixtQkFBbUI7RUFDckI7O0VBRUE7SUFDRSx5QkFBeUI7SUFDekIsY0FBYztFQUNoQjs7RUFFQTtJQUNFLHlCQUF5QjtFQUMz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O0lBQ1AseUJBQXlCO0lBQ3pCLGFBQWE7SUFDYixrQkFBa0I7SUFDbEIsV0FBVztFQUNiOztFQUVBO0lBQ0U7TUFDRSxzQkFBc0I7TUFDdEIsU0FBUztJQUNYOztJQUVBO01BQ0UsV0FBVztJQUNiOztJQUVBO01BQ0UsV0FBVztJQUNiOztJQUVBO01BQ0Usa0JBQWtCO0lBQ3BCOztJQUVBO01BQ0UsV0FBVztNQUNYLFdBQVc7TUFDWCxZQUFZO0lBQ2Q7O0lBRUE7TUFDRSxhQUFhO0lBQ2Y7RUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qIHNyYy9hcHAvZmVhdHVyZXMvY3JvcC1yb2FkbWFwL2Nyb3Atcm9hZG1hcC5jb21wb25lbnQuY3NzICovXG4uY3JvcC1yb2FkbWFwLWNvbnRhaW5lciB7XG4gICAgcGFkZGluZzogMjBweDtcbiAgICBtYXgtd2lkdGg6IDEyMDBweDtcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgfVxuICBcbiAgLnNlY3Rpb24taGVhZGVyIHtcbiAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICB9XG4gIFxuICAuc2VjdGlvbi1oZWFkZXIgaDEge1xuICAgIGNvbG9yOiAjMDA2ZDViO1xuICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gIH1cbiAgXG4gIC5zZWN0aW9uLWRlc2NyaXB0aW9uIHtcbiAgICBjb2xvcjogIzRhNGE0YTtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gIH1cbiAgXG4gIC5jYXJkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMDgpO1xuICAgIHBhZGRpbmc6IDI0cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgfVxuICBcbiAgLmNhcmQgaDIge1xuICAgIGNvbG9yOiAjMDA2ZDViO1xuICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgICBtYXJnaW4tdG9wOiAwO1xuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gIH1cbiAgXG4gIC8qIEZvcm0gc3R5bGluZyAqL1xuICAuZm9ybS1ncm91cCB7XG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgfVxuICBcbiAgbGFiZWwge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGNvbG9yOiAjNDQ0O1xuICB9XG4gIFxuICBpbnB1dCwgc2VsZWN0IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nOiAxMnB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgfVxuICBcbiAgaW5wdXQ6Zm9jdXMsIHNlbGVjdDpmb2N1cyB7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgICBib3JkZXItY29sb3I6ICMwMDhlNzM7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMnB4IHJnYmEoMCwgMTQyLCAxMTUsIDAuMik7XG4gIH1cbiAgXG4gIC5lcnJvci1tZXNzYWdlIHtcbiAgICBjb2xvcjogI2QzMmYyZjtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgbWFyZ2luLXRvcDogNHB4O1xuICB9XG4gIFxuICAuYnRuLXByaW1hcnksIC5idG4tc2Vjb25kYXJ5IHtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgcGFkZGluZzogMTJweCAyNHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XG4gICAgZm9udC1zaXplOiAxNnB4O1xuICB9XG4gIFxuICAuYnRuLXByaW1hcnkge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDhlNzM7XG4gICAgY29sb3I6IHdoaXRlO1xuICB9XG4gIFxuICAuYnRuLXByaW1hcnk6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDU5NGQ7XG4gIH1cbiAgXG4gIC5idG4tcHJpbWFyeTpkaXNhYmxlZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2NjY2NjYztcbiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICB9XG4gIFxuICAuYnRuLXNlY29uZGFyeSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZWRlNjtcbiAgICBjb2xvcjogIzAwNmQ1YjtcbiAgfVxuICBcbiAgLmJ0bi1zZWNvbmRhcnk6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGRjZDI7XG4gIH1cbiAgXG4gIC5idG4tc2Vjb25kYXJ5OmRpc2FibGVkIHtcbiAgICBvcGFjaXR5OiAwLjY7XG4gICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbiAgfVxuICBcbiAgLyogQWN0aXZlIENyb3AgQ3ljbGUgKi9cbiAgLmN5Y2xlLWhlYWRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgfVxuICBcbiAgLmN5Y2xlLW1ldGEge1xuICAgIGNvbG9yOiAjNjY2O1xuICAgIG1hcmdpbi10b3A6IDRweDtcbiAgfVxuICBcbiAgLnByb2dyZXNzLWNvbnRhaW5lciB7XG4gICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgfVxuICBcbiAgLnByb2dyZXNzLWJhciB7XG4gICAgaGVpZ2h0OiAxMnB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGYyZjE7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICB9XG4gIFxuICAucHJvZ3Jlc3MtZmlsbCB7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDZkNWI7XG4gICAgdHJhbnNpdGlvbjogd2lkdGggMC4zcyBlYXNlO1xuICB9XG4gIFxuICAucHJvZ3Jlc3MtdGV4dCB7XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGNvbG9yOiAjNjY2O1xuICB9XG4gIFxuICAvKiBUaW1lbGluZSAqL1xuICAuc3RhZ2VzLXRpbWVsaW5lIHtcbiAgICBtYXJnaW4tdG9wOiA0MHB4O1xuICB9XG4gIFxuICAudGltZWxpbmUtY29udGFpbmVyIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgcGFkZGluZy1sZWZ0OiA0MHB4O1xuICB9XG4gIFxuICAudGltZWxpbmUtdHJhY2sge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAyMHB4O1xuICAgIHRvcDogMDtcbiAgICBib3R0b206IDA7XG4gICAgd2lkdGg6IDJweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbiAgfVxuICBcbiAgLnRpbWVsaW5lLXN0YWdlIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgbWFyZ2luLWJvdHRvbTogNDBweDtcbiAgfVxuICBcbiAgLnN0YWdlLW1hcmtlciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IC00MHB4O1xuICAgIHRvcDogMDtcbiAgICB3aWR0aDogNDBweDtcbiAgICBoZWlnaHQ6IDQwcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZWRlNjtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHotaW5kZXg6IDI7XG4gIH1cbiAgXG4gIC5zdGFnZS1tYXJrZXIuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2ZDViO1xuICB9XG4gIFxuICAubWFya2VyLWljb24ge1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGNvbG9yOiAjMDA2ZDViO1xuICB9XG4gIFxuICAuc3RhZ2UtbWFya2VyLmFjdGl2ZSAubWFya2VyLWljb24ge1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgfVxuICBcbiAgLnRpbWVsaW5lLXN0YWdlLmNvbXBsZXRlZCAuc3RhZ2UtbWFya2VyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOGQ5MGJiO1xuICB9XG4gIFxuICAudGltZWxpbmUtc3RhZ2UuY29tcGxldGVkIC5tYXJrZXItaWNvbiB7XG4gICAgY29sb3I6IHdoaXRlO1xuICB9XG4gIFxuICAvKiBzcmMvYXBwL2ZlYXR1cmVzL2Nyb3Atcm9hZG1hcC9jcm9wLXJvYWRtYXAuY29tcG9uZW50LmNzcyAoY29udGludWVkKSAqL1xuLnN0YWdlLWNvbnRlbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjZjBlZGU2O1xuICB9XG4gIFxuICAudGltZWxpbmUtc3RhZ2UuY29tcGxldGVkIC5zdGFnZS1jb250ZW50IHtcbiAgICBib3JkZXItbGVmdC1jb2xvcjogIzhkOTBiYjtcbiAgfVxuICBcbiAgLnN0YWdlLWNvbnRlbnQgaDMge1xuICAgIGNvbG9yOiAjMDA2ZDViO1xuICAgIG1hcmdpbi10b3A6IDA7XG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgfVxuICBcbiAgLnN0YWdlLWR1cmF0aW9uIHtcbiAgICBjb2xvcjogIzY2NjtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgfVxuICBcbiAgLnN0YWdlLWRlc2NyaXB0aW9uIHtcbiAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgIGNvbG9yOiAjNDQ0O1xuICB9XG4gIFxuICAuc3RhZ2UtdGFza3Mge1xuICAgIG1hcmdpbi10b3A6IDE2cHg7XG4gIH1cbiAgXG4gIC5zdGFnZS10YXNrcyBoNCB7XG4gICAgbWFyZ2luLXRvcDogMDtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBjb2xvcjogIzMzMztcbiAgfVxuICBcbiAgLnN0YWdlLXRhc2tzIHVsIHtcbiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gICAgbWFyZ2luOiAwO1xuICB9XG4gIFxuICAuc3RhZ2UtdGFza3MgbGkge1xuICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICBjb2xvcjogIzQ0NDtcbiAgfVxuICBcbiAgLnN0YWdlLXRhc2tzIGxpLmNvbXBsZXRlZCB7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XG4gICAgY29sb3I6ICM4ODg7XG4gIH1cbiAgXG4gIC5zdGFnZS1hY3Rpb25zIHtcbiAgICBtYXJnaW4tdG9wOiAxNnB4O1xuICB9XG4gIFxuICAvKiBNb2RhbCAqL1xuICAubW9kYWwge1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcbiAgICBib3R0b206IDA7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB6LWluZGV4OiAxMDAwO1xuICB9XG4gIFxuICAubW9kYWwtY29udGVudCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICB3aWR0aDogOTAlO1xuICAgIG1heC13aWR0aDogNjAwcHg7XG4gICAgbWF4LWhlaWdodDogOTB2aDtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgIGJveC1zaGFkb3c6IDAgNHB4IDIwcHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgfVxuICBcbiAgLm1vZGFsLWhlYWRlciB7XG4gICAgcGFkZGluZzogMTZweCAyNHB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIH1cbiAgXG4gIC5tb2RhbC1oZWFkZXIgaDIge1xuICAgIG1hcmdpbjogMDtcbiAgICBjb2xvcjogIzAwNmQ1YjtcbiAgICBmb250LXNpemU6IDIwcHg7XG4gIH1cbiAgXG4gIC5jbG9zZS1idXR0b24ge1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgY29sb3I6ICM2NjY7XG4gIH1cbiAgXG4gIC5jbG9zZS1idXR0b246aG92ZXIge1xuICAgIGNvbG9yOiAjMzMzO1xuICB9XG4gIFxuICAubW9kYWwtYm9keSB7XG4gICAgcGFkZGluZzogMjRweDtcbiAgfVxuICBcbiAgLm1vZGFsLWZvb3RlciB7XG4gICAgcGFkZGluZzogMTZweCAyNHB4O1xuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgfVxuICBcbiAgLmFpLW1lc3NhZ2Uge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiAxNnB4O1xuICB9XG4gIFxuICAuYWktaWNvbiB7XG4gICAgZm9udC1zaXplOiAyNHB4O1xuICB9XG4gIFxuICAuYWktY29udGVudCB7XG4gICAgZmxleDogMTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmOWY3O1xuICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIGNvbG9yOiAjMzMzO1xuICB9XG4gIFxuICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAuY3ljbGUtaGVhZGVyIHtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBnYXA6IDE2cHg7XG4gICAgfVxuICAgIFxuICAgIC5jeWNsZS1hY3Rpb25zIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cbiAgICBcbiAgICAuY3ljbGUtYWN0aW9ucyBidXR0b24ge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgfVxuICAgIFxuICAgIC50aW1lbGluZS1jb250YWluZXIge1xuICAgICAgcGFkZGluZy1sZWZ0OiAzMHB4O1xuICAgIH1cbiAgICBcbiAgICAuc3RhZ2UtbWFya2VyIHtcbiAgICAgIGxlZnQ6IC0zMHB4O1xuICAgICAgd2lkdGg6IDMwcHg7XG4gICAgICBoZWlnaHQ6IDMwcHg7XG4gICAgfVxuICAgIFxuICAgIC5zdGFnZS1jb250ZW50IHtcbiAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgfVxuICB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","crop_r7","id","ɵɵadvance","ɵɵtextInterpolate","name","ɵɵlistener","CropRoadmapComponent_section_6_Template_form_ngSubmit_4_listener","ɵɵrestoreView","_r9","ctx_r8","ɵɵnextContext","ɵɵresetView","onSubmit","ɵɵtemplate","CropRoadmapComponent_section_6_option_11_Template","CropRoadmapComponent_section_6_div_12_Template","ɵɵelement","CropRoadmapComponent_section_6_div_17_Template","CropRoadmapComponent_section_6_div_22_Template","ctx_r0","cropForm","cropTypes","tmp_2_0","get","invalid","touched","tmp_3_0","tmp_4_0","ɵɵclassProp","task_r17","completed","ɵɵtextInterpolate1","description","CropRoadmapComponent_section_7_div_21_div_16_Template_button_click_1_listener","_r20","i_r14","index","ctx_r18","markStageComplete","CropRoadmapComponent_section_7_div_21_li_15_Template","CropRoadmapComponent_section_7_div_21_div_16_Template","stage_r13","ctx_r12","getCurrentWeek","startWeek","endWeek","ɵɵtextInterpolate2","tasks","CropRoadmapComponent_section_7_Template_button_click_10_listener","_r22","ctx_r21","getAIInsight","CropRoadmapComponent_section_7_span_11_Template","CropRoadmapComponent_section_7_span_12_Template","CropRoadmapComponent_section_7_div_21_Template","ctx_r1","currentCropCycle","cropName","ɵɵtextInterpolate3","ɵɵpipeBind2","plantDate","durationWeeks","loadingInsight","ɵɵstyleProp","calculateProgress","stages","CropRoadmapComponent_div_8_Template_button_click_5_listener","_r24","ctx_r23","closeAIInsight","CropRoadmapComponent_div_8_Template_button_click_14_listener","ctx_r25","ctx_r2","aiInsight","ɵɵsanitizeHtml","CropRoadmapComponent","constructor","fb","cropService","aiService","showAiInsight","group","cropType","required","cycleDuration","min","max","ngOnInit","loadCropTypes","loadCurrentCropCycle","getCropTypes","subscribe","next","types","error","console","getCurrentCropCycle","cycle","patchValue","cropTypeId","startDate","Date","today","totalDays","daysPassed","Math","floor","getTime","round","ceil","formData","value","selectedCropType","find","ct","cropCycle","now","toString","currentStage","status","completedStages","map","s","duration","t","createCropCycle","stageIndex","completeStage","success","updatedStages","getCropGrowthInsight","insight","ɵɵdirectiveInject","i1","FormBuilder","i2","CropService","i3","AiService","selectors","decls","vars","consts","template","CropRoadmapComponent_Template","rf","ctx","CropRoadmapComponent_section_6_Template","CropRoadmapComponent_section_7_Template","CropRoadmapComponent_div_8_Template"],"sources":["/home/injinia/eden-link/src/app/features/crop-roadmap/crop-roadmap.component.ts","/home/injinia/eden-link/src/app/features/crop-roadmap/crop-roadmap.component.html"],"sourcesContent":["// src/app/features/crop-roadmap/crop-roadmap.component.ts\nimport { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { CropService } from '../../core/services/crop.service';\nimport { AiService } from '../../core/services/ai.service';\nimport { CropCycle } from '../../core/models/crop-cycle.model';\nimport { CropType } from '../../core/models/crop-type.model';\n\n@Component({\n  selector: 'app-crop-roadmap',\n  templateUrl: './crop-roadmap.component.html',\n  styleUrls: ['./crop-roadmap.component.css']\n})\nexport class CropRoadmapComponent implements OnInit {\n  cropForm: FormGroup;\n  cropTypes: CropType[] = [];\n  currentCropCycle: CropCycle | null = null;\n  aiInsight: string = '';\n  showAiInsight: boolean = false;\n  loadingInsight: boolean = false;\n  \n  constructor(\n    private fb: FormBuilder,\n    private cropService: CropService,\n    private aiService: AiService\n  ) {\n    this.cropForm = this.fb.group({\n      cropType: ['', Validators.required],\n      plantDate: ['', Validators.required],\n      cycleDuration: ['12', [Validators.required, Validators.min(1), Validators.max(52)]]\n    });\n  }\n\n  ngOnInit(): void {\n    this.loadCropTypes();\n    this.loadCurrentCropCycle();\n  }\n\n  loadCropTypes(): void {\n    this.cropService.getCropTypes().subscribe({\n      next: (types) => {\n        this.cropTypes = types;\n      },\n      error: (error) => {\n        console.error('Error loading crop types:', error);\n      }\n    });\n  }\n\n  loadCurrentCropCycle(): void {\n    this.cropService.getCurrentCropCycle().subscribe({\n      next: (cycle) => {\n        this.currentCropCycle = cycle;\n        \n        if (cycle) {\n          // Populate form with current cycle data\n          this.cropForm.patchValue({\n            cropType: cycle.cropTypeId,\n            plantDate: cycle.plantDate,\n            cycleDuration: cycle.durationWeeks\n          });\n        }\n      },\n      error: (error) => {\n        console.error('Error loading current crop cycle:', error);\n      }\n    });\n  }\n\n  calculateProgress(): number {\n    if (!this.currentCropCycle) return 0;\n    \n    const startDate = new Date(this.currentCropCycle.plantDate);\n    const today = new Date();\n    const totalDays = this.currentCropCycle.durationWeeks * 7;\n    const daysPassed = Math.floor((today.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\n    \n    return Math.min(Math.round((daysPassed / totalDays) * 100), 100);\n  }\n\n  getCurrentWeek(): number {\n    if (!this.currentCropCycle) return 0;\n    \n    const startDate = new Date(this.currentCropCycle.plantDate);\n    const today = new Date();\n    const daysPassed = Math.floor((today.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\n    \n    return Math.min(Math.ceil(daysPassed / 7), this.currentCropCycle.durationWeeks);\n  }\n\n  onSubmit(): void {\n    if (this.cropForm.invalid) return;\n    \n    const formData = this.cropForm.value;\n    const selectedCropType = this.cropTypes.find(ct => ct.id === formData.cropType);\n    \n    const cropCycle: CropCycle = {\n      id: Date.now().toString(), // Generate a temporary ID\n      cropTypeId: formData.cropType,\n      cropName: selectedCropType?.name || '',\n      startDate: new Date(),\n      plantDate: formData.plantDate,\n      currentStage: 0,\n      status: 'active',\n      completedStages: [],\n      durationWeeks: formData.cycleDuration,\n      stages: selectedCropType?.stages.map(s => ({\n        name: s.name,\n        startWeek: s.duration,\n        endWeek: s.duration,\n        description: s.description,\n        tasks: s.tasks.map(t => ({ description: t, completed: false })),\n        completed: false\n      })) || []\n    };\n    \n    this.cropService.createCropCycle(cropCycle).subscribe({\n      next: (cycle) => {\n        this.currentCropCycle = cycle;\n      },\n      error: (error) => {\n        console.error('Error creating crop cycle:', error);\n      }\n    });\n  }\n  \n  markStageComplete(stageIndex: number): void {\n    if (!this.currentCropCycle) return;\n    \n    this.cropService.completeStage(this.currentCropCycle.id, stageIndex).subscribe({\n      next: (success) => {\n        if (success && this.currentCropCycle) {\n          // Update the local state if the operation was successful\n          const updatedStages = [...this.currentCropCycle.stages];\n          updatedStages[stageIndex].completed = true;\n          this.currentCropCycle = {\n            ...this.currentCropCycle,\n            stages: updatedStages,\n            completedStages: [...this.currentCropCycle.completedStages, stageIndex]\n          };\n        }\n      },\n      error: (error) => {\n        console.error('Error completing stage:', error);\n      }\n    });\n  }\n  \n  getAIInsight(): void {\n    if (!this.currentCropCycle) return;\n    \n    this.loadingInsight = true;\n    this.aiService.getCropGrowthInsight(this.currentCropCycle.id).subscribe({\n      next: (insight) => {\n        this.aiInsight = insight;\n        this.showAiInsight = true;\n        this.loadingInsight = false;\n      },\n      error: (error) => {\n        console.error('Error getting AI insight:', error);\n        this.loadingInsight = false;\n      }\n    });\n  }\n  \n  closeAIInsight(): void {\n    this.showAiInsight = false;\n  }\n}","<!-- src/app/features/crop-roadmap/crop-roadmap.component.html -->\n<div class=\"crop-roadmap-container\">\n    <section class=\"section-header\">\n      <h1>Crop Cycle Roadmap</h1>\n      <p class=\"section-description\">Track your crop's growth stages and receive AI-powered insights.</p>\n    </section>\n  \n    <section class=\"crop-setup\" *ngIf=\"!currentCropCycle\">\n      <div class=\"card\">\n        <h2>Start a New Crop Cycle</h2>\n        <form [formGroup]=\"cropForm\" (ngSubmit)=\"onSubmit()\">\n          <div class=\"form-group\">\n            <label for=\"cropType\">Crop Type</label>\n            <select id=\"cropType\" formControlName=\"cropType\">\n              <option value=\"\">Select a crop type</option>\n              <option *ngFor=\"let crop of cropTypes\" [value]=\"crop.id\">{{ crop.name }}</option>\n            </select>\n            <div class=\"error-message\" *ngIf=\"cropForm.get('cropType')?.invalid && cropForm.get('cropType')?.touched\">\n              Please select a crop type\n            </div>\n          </div>\n  \n          <div class=\"form-group\">\n            <label for=\"plantDate\">Planting Date</label>\n            <input type=\"date\" id=\"plantDate\" formControlName=\"plantDate\">\n            <div class=\"error-message\" *ngIf=\"cropForm.get('plantDate')?.invalid && cropForm.get('plantDate')?.touched\">\n              Please select a valid planting date\n            </div>\n          </div>\n  \n          <div class=\"form-group\">\n            <label for=\"cycleDuration\">Cycle Duration (weeks)</label>\n            <input type=\"number\" id=\"cycleDuration\" formControlName=\"cycleDuration\" min=\"1\" max=\"52\">\n            <div class=\"error-message\" *ngIf=\"cropForm.get('cycleDuration')?.invalid && cropForm.get('cycleDuration')?.touched\">\n              Please enter a valid duration (1-52 weeks)\n            </div>\n          </div>\n  \n          <button type=\"submit\" class=\"btn-primary\" [disabled]=\"cropForm.invalid\">Start Tracking</button>\n        </form>\n      </div>\n    </section>\n  \n    <section class=\"active-crop-cycle\" *ngIf=\"currentCropCycle\">\n      <div class=\"card\">\n        <div class=\"cycle-header\">\n          <div>\n            <h2>{{ currentCropCycle.cropName }}</h2>\n            <p class=\"cycle-meta\">\n              Planted on {{ currentCropCycle.plantDate | date:'MMM d, y' }} \n              • Week {{ getCurrentWeek() }} of {{ currentCropCycle.durationWeeks }}\n            </p>\n          </div>\n          <div class=\"cycle-actions\">\n            <button class=\"btn-secondary\" (click)=\"getAIInsight()\" [disabled]=\"loadingInsight\">\n              <span *ngIf=\"!loadingInsight\">AI Insight</span>\n              <span *ngIf=\"loadingInsight\">Loading...</span>\n            </button>\n          </div>\n        </div>\n  \n        <div class=\"progress-container\">\n          <div class=\"progress-bar\">\n            <div class=\"progress-fill\" [style.width.%]=\"calculateProgress()\"></div>\n          </div>\n          <div class=\"progress-text\">{{ calculateProgress() }}% complete</div>\n        </div>\n  \n        <div class=\"stages-timeline\">\n          <div class=\"timeline-container\">\n            <div class=\"timeline-track\"></div>\n            \n            <div class=\"timeline-stage\" *ngFor=\"let stage of currentCropCycle.stages; let i = index\" \n                 [class.completed]=\"stage.completed\">\n              <div class=\"stage-marker\" [class.active]=\"getCurrentWeek() >= stage.startWeek && getCurrentWeek() <= stage.endWeek\">\n                <div class=\"marker-icon\">{{ i + 1 }}</div>\n              </div>\n              <div class=\"stage-content\">\n                <h3>{{ stage.name }}</h3>\n                <p class=\"stage-duration\">Week {{ stage.startWeek }} - {{ stage.endWeek }}</p>\n                <p class=\"stage-description\">{{ stage.description }}</p>\n                \n                <div class=\"stage-tasks\">\n                  <h4>Tasks:</h4>\n                  <ul>\n                    <li *ngFor=\"let task of stage.tasks\" [class.completed]=\"task.completed\">\n                      {{ task.description }}\n                    </li>\n                  </ul>\n                </div>\n                \n                <div class=\"stage-actions\" *ngIf=\"!stage.completed && getCurrentWeek() >= stage.startWeek\">\n                  <button class=\"btn-secondary\" (click)=\"markStageComplete(i)\">Mark Complete</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  \n    <!-- AI Insight Modal -->\n    <div class=\"modal\" *ngIf=\"showAiInsight\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h2>AI Growth Insight</h2>\n          <button class=\"close-button\" (click)=\"closeAIInsight()\">×</button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"ai-message\">\n            <div class=\"ai-icon\">🤖</div>\n            <div class=\"ai-content\">\n              <p [innerHTML]=\"aiInsight\"></p>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button class=\"btn-secondary\" (click)=\"closeAIInsight()\">Close</button>\n        </div>\n      </div>\n    </div>\n  </div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}